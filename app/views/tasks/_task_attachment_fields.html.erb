<div class="nested-fields mb-3 border p-3 rounded" data-new="<%= new_record || false %>">
  <% if f.object.persisted? %>
    <p>
      <strong>Stávající soubor:</strong>
      <%= link_to f.object.file.filename, rails_blob_path(f.object.file, disposition: 'attachment') %>
    </p>
  <% end %>

  <div class="form-group">
    <%= f.input :file,
                as: :file,
                label: (f.object.persisted? ? "Nový soubor (volitelné)" : "Soubor"),
                input_html: { direct_upload: true } %>
  </div>

  <div class="form-group">
    <%= f.input :note,
                as: :text,
                label: "Poznámka k příloze" %>
  </div>

  <div>
    <% if f.object.persisted? %>
      <%= f.input :_destroy, as: :boolean, label: "Odstranit přílohu" %>
    <% else %>
      <button class="btn btn-sm btn-danger" type="button" data-action="attachments#remove">
        Odebrat
      </button>
    <% end %>
  </div>
</div>
